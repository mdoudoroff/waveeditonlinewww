function dlCanvas(){var e=document.getElementById("canvas"),t=e.toDataURL("image/png");this.href=t}function loadNewWave(){var e=$("#waveselect").val();$.getJSON("/files/"+e,function(e){var t=document.getElementById("canvas").getContext("2d");t.clearRect(0,0,canvas.width,canvas.height);var a=0,n=0,o;for(n=0,a=0;a<64;a++){a>0&&a%8==0&&(n+=64),hOffset=a%8*256,o=e.slice(256*a,256*a+256),t.lineWidth=1,t.beginPath(),t.strokeStyle="#000",t.moveTo(.5*hOffset,n+o[i]+32);for(var i=0;i<o.length;i++)t.lineTo(.5*(hOffset+i),n+o[i]+32);t.stroke()}})}jQuery(document).ready(function(){$.getJSON("directory.json",function(e){$("#waveselect").empty(),$.each(e,function(){$("#waveselect").append($('<option value="'+this.fn+'">'+this.title+" ("+this.attribution+")</option>"))}),$("#waveselect").change(loadNewWave),loadNewWave()}),$("#dl").click(dlCanvas)});